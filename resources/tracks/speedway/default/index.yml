
type: track
speed: 0
tint: 0x6666ff

align_bottom:
  props:
    pivot.y: 1
    scale.y: -1
    y: 355

align_top:
  props:
    pivot.y: 1
    y: -355

track:

  start:

    - type: emitter
      images:
        - //particles/confetti_1
        - //particles/confetti_2
        - //particles/confetti_3
        - //particles/confetti_4
      
      props:
        z: 100
        y: -200
        x: 500

      emit:
        rect: [2000, 800]
        freq: 45
        life: 3
        scale: [0.5, 0.1]
        dir: [100, 120]
        speed: [60, 120]
        alpha: [0, 1, 1, 1, 1, 1, 1, 0]
        rotation: [-10, 80]
        startRotation: [0, 360]
        per: 3
        chance: 0.5

    - type: repeater
      cols: 30
      rows: 3
      sortBy: y
      offsetX: 50
      offsetY: 60

      props:
        y: -600
        x: -500

      compose:
        - type: crowd
          actor: style_1
          props:
            x: [:range, -13, 13]
            y: [:range, -13, 13]

    - type: sprite
      image: grass_1
      base: /align_top
    
    - type: sprite
      image: grass_1
      base: /align_bottom
    
    - type: sprite
      image: grass_2
      base: /align_top
      props:
        x: -416
    
    - type: sprite
      image: grass_2
      base: /align_bottom
      props:
        x: -416

    - type: sprite
      image: starting_line
      role: base
  
  finish:

    - type: emitter
      images:
        - //particles/confetti_1
        - //particles/confetti_2
        - //particles/confetti_3
        - //particles/confetti_4
      
      props:
        z: 100
        y: -200
        x: 500

      emit:
        rect: [2000, 800]
        freq: 45
        life: 3
        scale: [0.5, 0.1]
        dir: [100, 120]
        speed: [60, 120]
        alpha: [0, 1, 1, 1, 1, 1, 1, 0]
        rotation: [-10, 80]
        startRotation: [0, 360]
        per: 3
        chance: 0.5

    - type: repeater
      cols: 30
      rows: 3
      sortBy: y
      offsetX: 50
      offsetY: 60

      props:
        y: -600
        x: -500

      compose:
        - type: crowd
          actor: style_1
          props:
            x: [:range, -13, 13]
            y: [:range, -13, 13]

    - type: sprite
      image: grass_1
      base: /align_top
    
    - type: sprite
      image: grass_1
      base: /align_bottom
    
    - type: sprite
      image: grass_2
      base: /align_top
      props:
        x: -416
    
    - type: sprite
      image: grass_2
      base: /align_bottom
      props:
        x: -416

    - type: sprite
      image: starting_line
      role: base

  order: [0, 0, 0, 1, 0, 0, 0, 0]
  repeating:

    - compose:

      - type: sprite
        image: grass_1
        base: /align_bottom
        props:
          x: 416
        
      - type: sprite
        image: grass_1
        base: /align_bottom
      
      - type: sprite
        image: grass_1
        base: /align_top
        props:
          x: 416
        
      - type: sprite
        image: grass_2
        base: /align_top

      - type: repeater
        cols: 2
        rows: 1

        compose:
          
          - type: sprite
            image: road_1
            role: base

    - compose:

      - type: sprite
        image: barrier_out
        base: /align_top
        props:
          x: [:*, 416, 0]

      - type: sprite
        image: barrier_1
        base: /align_top
        props:
          x: [:*, 416, 1]

      - type: sprite
        image: barrier_2
        base: /align_top
        props:
          x: [:*, 416, 2]

      - type: sprite
        image: barrier_1
        base: /align_top
        props:
          x: [:*, 416, 3]

      - type: sprite
        image: barrier_2
        base: /align_top
        props:
          x: [:*, 416, 4]

      - type: sprite
        image: barrier_1
        base: /align_top
        props:
          x: [:*, 416, 5]

      - type: sprite
        image: barrier_2
        base: /align_top
        props:
          x: [:*, 416, 6]

      - type: sprite
        image: barrier_1
        base: /align_top
        props:
          x: [:*, 416, 7]

      - type: sprite
        image: barrier_2
        base: /align_top
        props:
          x: [:*, 416, 8]

      - type: sprite
        image: barrier_in
        base: /align_top
        props:
          x: [:*, 416, 9]

      - type: repeater
        cols: 5
        rows: 1
        compose:
          - type: sprite
            image: grass_1
            base: /align_bottom
            props:
              x: 416
              y: 355
              pivot.y: 1
              scale.y: -1
          
          - type: sprite
            image: grass_2
            base: /align_bottom
            props:
              y: 355
              pivot.y: 1
              scale.y: -1

      
      - type: repeater
        cols: 10
        rows: 1

        compose:
          
          - type: sprite
            # image: [:pick, road_1, road_2, road_3 ]
            image: road_1
            role: base

