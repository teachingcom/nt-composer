
type: track
speed: 0
tint: 0x6666ff

effects:
  -
    attach_to: car
    side: front
    compose:
      - type: emitter

foreground:
  compose:
    - type: emitter
      image: //particles/rain
      props:
        emit.rect.width: 10
      emit:
        life: [1, 2]
        blend: screen
        color: [0xffffff, 0x005599]
        scale: [0.5, 0.5]
        alpha: [1, 0]
        speed: [1600, 2400]
        dir: [168, 178]
        startRotation: -90
        freq: 30
        rect: [100, 900, 500, 0]

# start:
# end:

actors:

  tire:

    - type: group
      props:
        y: -800
        
      compose: 
        - type: sprite
          image: simple_tire
          props:
            tint: 0xff0000
            scaleX: 0.3
            scaleY: 0.3
        
        - type: sprite
          image: simple_tire
          props:
            tint: 0xffffff
            x: [:rx, -30, 30]
            y: -40
            scaleX: 0.3
            scaleY: 0.3
        
        - type: sprite
          image: simple_tire
          props:
            tint: 0xff0000
            y: -80
            x: [:rx, -60, 60]
            scaleX: 0.3
            scaleY: 0.3

crowd:
  compose:

    - type: repeater
      marginX: 0
      marginY: 0
      repeatX: 12
      repeatY: 1

      compose: 
        - type: crowd
          animation: [cheer, jump, clap, wave]
          actor: man_2

    - type: repeater
      marginX: 0
      marginY: 0
      repeatX: 12
      repeatY: 1
      props:

      compose: 
        - type: crowd
          animation: [cheer, jump, clap, wave]
          actor: man_2
          props:
            y: -60
            x: 20

    - type: repeater
      marginX: 0
      marginY: 0
      repeatX: 12
      repeatY: 1
      props:

      compose: 
        - type: crowd
          animation: [cheer, jump, clap, wave]
          actor: man_2
          props:
            y: -120
            x: -20

    # - type: crowd
    #   animation: cheer
    #   actor: man_2
    
    # - type: crowd
    #   animation: wave
    #   actor: man_2
    
    # - type: crowd
    #   animation: clap
    #   actor: man_2
    
    # - type: crowd
    #   animation: jump
      # actor: man_2

    # - type: crowd
    #   animation: cheer
    #   actor: man_1
    #   scale: 0.5
    #   props:
    #     x: 390
    #     y: -560

    # - type: crowd
    #   animation: cheer
    #   actor: man_1
    #   scale: 2
    #   props:
    #     x: 430
    #     y: -590

track:

  finish:

    - type: emitter
      images:
        - //particles/confetti_1
        - //particles/confetti_2
        - //particles/confetti_3
        - //particles/confetti_4

      props:
        z: 2

      emit:
        life: [1, 2]
        scale: [1, 0.4]
        alpha: [1, 0]
        speed: [50, 150]
        rotation: [-360, 360]
        dir: [120, 95]
        rect: [4000, 2000, 1000]
        freq: 200
    

    - type: sprite
      image: road_1
      role: base
      props:
        tint: 0xccffff
        x: 460

    - type: sprite
      image: starting_block
      role: base

    - type: sprite
      image: road_1
      role: base
      props:
        tint: 0xccffff
        x: -460

  start:

    - type: group
      base: /crowd
      props:
        x: 100

    # - type: group
    #   base: /crowd
    #   props:
    #     x: 300

    # - type: group
    #   base: /crowd
    #   props:
    #     x: -100

    # - type: group
    #   base: /crowd
    #   props:
    #     x: 200
    #     y: -80

    # - type: group
    #   base: /crowd
    #   props:
    #     x: 0
    #     y: -80


    - type: sprite
      image: road_1
      role: base
      props:
        tint: 0xff0000

    # - type: sprite
    #   image: road_1
    #   role: base
    #   props:
    #     x: -460

    # - type: sprite
    #   image: starting_block
    #   role: base
    #   props:
    #     x: 460

    # - type: sprite
    #   image: ground_1
    #   props:
    #     y: -886
    #     x: -320
    #     scaleX: 2.3
    
    # - type: sprite
    #   image: ground_1
    #   props:
    #     y: -886
    #     x: 320
    #     scaleX: 2.3
    
    # - type: sprite
    #   image: ground_1
    #   props:
    #     y: 886
    #     x: -320
    #     scaleX: 2.3
    
    # - type: sprite
    #   image: ground_1
    #   props:
    #     y: 886
    #     x: 320
    #     scaleX: 2.3

  order: [1]
  repeating:

    - compose:

        - type: sprite
          image: road_1
          role: base

        - type: sprite
          image: grass
          props:
            y: -365
            pivot.y: 1

        - type: sprite
          image: grass
          props:
            y: 365
            pivot.y: 0

        - type: sprite
          image: grass_overlap
          props:
            z: 1
            y: -365
            pivot.y: 0

        - type: sprite
          image: grass_overlap
          props:
            z: 1
            y: 365
            pivot.y: 0
            scale.y: -1

    - compose:

        # - type: sprite
        #   image: barrier_repeat
        #   role: bounds
        #   props:
        #     y: -365
        #     pivot.y: 1

        - type: repeater
          cols: 2
          rows: 1

          compose:
            - type: sprite
              image: barrier_repeat
              role: bounds
              props:
                y: -360
                pivot.y: 1
            
            - type: sprite
              image: grass
              role: bounds
              props:
                y: -365
                pivot.y: 1
            
            - type: sprite
              image: barrier_repeat
              role: bounds
              props:
                y: 360
                pivot.y: 1
                scale.y: -1

          
        - type: repeater
          cols: 2
          rows: 1
          role: base

          compose: 
            - type: sprite
              image: road_1
              role: bounds
              # props:
                # y: -365
                # z: 1


        # - type: repeater
        #   cols: 5
        #   rows: 1
        #   compose: 

        #     - type: sprite
        #       image: road_1
        #       role: base


        
        # - type: sprite
        #   image: ground_1
        #   props:
        #     y: 886
        #     scaleX: 1.175

    # - compose:

    #     - type: sprite
    #       image: road_1
    #       role: base

    #     - type: sprite
    #       image: ground_1
    #       props:
    #         y: -886
    #         scaleX: 1.175
        
    #     - type: sprite
    #       image: ground_1
    #       props:
    #         y: 886
    #         scaleX: 1.175
          
    # - compose:

    #     - type: sprite
    #       image: road_1
    #       role: base

    #     - type: sprite
    #       image: ground_1
    #       props:
    #         y: -886
    #         scaleX: 1.175

    #     - type: sprite
    #       image: ground_1
    #       props:
    #         y: 886
    #         scaleX: 1.175
          